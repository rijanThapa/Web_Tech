<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Snakes and Ladders</title>
    <style>
      body {
        display: flex;
        justify-content: center;
        align-items: center;
        height: 100vh;
        background-color: #f0f0f0;
        font-family: Arial, sans-serif;
      }
      .board {
        display: grid;
        grid-template-columns: repeat(10, 6vw);
        grid-template-rows: repeat(10, 6vw);
        gap: 2px;
        border: 2px solid #333;
        background-color: white;
      }
      .square {
        display: flex;
        align-items: center;
        justify-content: center;
        border: 1px solid #ccc;
        font-size: 0.8rem;
        position: relative;
      }
      .player {
        width: 80%;
        height: 80%;
        border-radius: 50%;
        position: absolute;
      }
      .player-red {
        background-color: red;
      }
      .player-blue {
        background-color: blue;
      }
      .player-green {
        background-color: green;
      }
      .player-yellow {
        background-color: yellow;
      }
      .snake,
      .ladder {
        position: absolute;
        width: 50%;
        height: 50%;
        font-size: 0.6rem;
        background-color: rgba(255, 0, 0, 0.5);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
      }
      .ladder {
        background-color: rgba(0, 0, 255, 0.5);
      }
    </style>
  </head>
  <body>
    <div class="board" id="board">
      <!-- Snakes and Ladders board generated by JavaScript -->
    </div>

    <script>
      const boardSize = 10;
      const numPlayers = 4;
      const playerColors = ["red", "blue", "green", "yellow"];
      let playerPositions = Array(numPlayers).fill(0);

      // Snakes and Ladders positions
      const snakes = {
        16: 6,
        47: 26,
        49: 11,
        56: 53,
        62: 19,
        64: 60,
        87: 24,
        93: 73,
        95: 75,
        98: 78,
      };
      const ladders = {
        1: 38,
        4: 14,
        9: 31,
        21: 42,
        28: 84,
        36: 44,
        51: 67,
        71: 91,
        80: 100,
      };

      function createBoard() {
        const boardElement = document.getElementById("board");
        boardElement.innerHTML = "";
        let counter = 100;
        let direction = 1; // start filling from bottom-left

        for (let row = 0; row < boardSize; row++) {
          let rowElement = document.createElement("div");
          rowElement.className = "board-row";
          boardElement.appendChild(rowElement);

          for (let col = 0; col < boardSize; col++) {
            let squareElement = document.createElement("div");
            squareElement.className = "square";
            squareElement.textContent = counter;

            if (snakes[counter]) {
              createSnakeOrLadder("S", squareElement);
            } else if (ladders[counter]) {
              createSnakeOrLadder("L", squareElement);
            }

            rowElement.appendChild(squareElement);
            counter += direction;
          }

          // Reverse direction for the next row
          direction *= -1;
          counter += boardSize;
        }
      }

      function createSnakeOrLadder(type, squareElement) {
        const slElement = document.createElement("div");
        slElement.className = type === "S" ? "snake" : "ladder";
        slElement.textContent = type + squareElement.textContent;
        squareElement.appendChild(slElement);
      }

      function movePlayer(playerIndex, steps) {
        let newPosition = playerPositions[playerIndex] + steps;

        // Check for ladder or snake
        if (ladders[newPosition]) {
          newPosition = ladders[newPosition];
        } else if (snakes[newPosition]) {
          newPosition = snakes[newPosition];
        }

        // Clamp position within board limits
        newPosition = Math.min(newPosition, boardSize * boardSize);
        playerPositions[playerIndex] = newPosition;

        // Check if player reached or surpassed 100
        if (newPosition >= 100) {
          alert(`Player ${playerIndex + 1} wins!`);
          resetGame();
          return;
        }

        updateBoard();
      }

      function updateBoard() {
        const squares = document.querySelectorAll(".square");
        squares.forEach((square) => {
          // Clear existing players and snakes/ladders
          square.innerHTML = "";
          playerPositions.forEach((position, index) => {
            if (parseInt(square.textContent) === position) {
              const player = document.createElement("div");
              player.className = `player ${playerColors[index]}-player`;
              square.appendChild(player);
            }
          });

          if (snakes[square.textContent]) {
            createSnakeOrLadder("S", square);
          } else if (ladders[square.textContent]) {
            createSnakeOrLadder("L", square);
          }
        });
      }

      function rollDice() {
        return Math.floor(Math.random() * 6) + 1;
      }

      function handlePlayerTurn(playerIndex) {
        const steps = rollDice();
        movePlayer(playerIndex, steps);
      }

      function resetGame() {
        playerPositions = Array(numPlayers).fill(0);
        updateBoard();
      }

      createBoard();

      // Simulate player turns for demo purposes
      setInterval(() => {
        for (let i = 0; i < numPlayers; i++) {
          handlePlayerTurn(i);
        }
      }, 2000); // 2 seconds interval for each player's turn
    </script>
  </body>
</html>
